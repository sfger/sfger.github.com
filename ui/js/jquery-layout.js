!function(t,e){"use strict";t.fn.layout=function(e){var s=t.type(e);if("string"===s)return this.each(function(){var s=t(this).data("ui");if(!s||!s.iLayout)throw new Error("UI:layout does not init...");s.iLayout[e]()}),!0;e=t.extend(!0,{panel:{toggle:!0,resize:!0,each:{north:{toggle:!1,resize:!1},south:{toggle:!1,resize:!1},west:{toggle:!0,resize:!0},east:{toggle:!0,resize:!0}}},panelBar:{size:5,each:{north:{},south:{},west:{},east:{}}}},e);var o=function(t,e){return new o.prototype.init(t,e)};return o.prototype={init:function(e,s){this.box=e,t(e).addClass("layout-container"),this.userOptions=s,this.panels={north:t(">.layout-north",e).get(0),south:t(">.layout-south",e).get(0),west:t(">.layout-middle-container>.layout-west",e).get(0),east:t(">.layout-middle-container>.layout-east",e).get(0),center:t(">.layout-middle-container>.layout-center",e).get(0)};var o=s.panelBar,i=o.each,a=o.size;this.panelBars={north:t(".bar-north",e).css({height:i.north.height||a}).get(0),south:t(".bar-south",e).css({height:i.south.height||a}).get(0),west:t(">.layout-middle-container>.bar-west",e).css({width:i.west.width||a}).get(0),east:t(">.layout-middle-container>.bar-east",e).css({width:i.east.width||a}).get(0)};var n=this;t(["Height","Width"]).each(function(t,e){n["getView"+e]=function(){var t="BackCompat"===document.compatMode?document.body:document.documentElement;return function(){return t["client"+e]}}(),n["getElement"+e]=function(t){return t&&"none"!==t.style.display?t["offset"+e]:0}}),s.panel.resize&&this.panelResize(),s.panel.toggle&&this.panelToggle(),t(window).resize(function(){n.resize()}),this.resize()},disableSelection:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},panelResize:function(){var e=this.box,s=this;t(">.resize-bar,>.layout-middle-container>.resize-bar",e).on({mousedown:function(o){if(t(o.target).hasClass("imge"))return!1;var i=s.userOptions.panel.each,a=this,n=t(a);if(n.hasClass("bar-north")&&i.north.resize===!1||n.hasClass("bar-south")&&i.south.resize===!1||n.hasClass("bar-west")&&i.west.resize===!1||n.hasClass("bar-east")&&i.east.resize===!1)return!1;var r=n.hasClass("bar-south")?n.next():n.prev();if("none"===r.get(0).style.display)return!1;var h=e.cover?t(e.cover).show():t("<div></div>").appendTo(document.body);e.cover=h.get(0),h.css({position:"absolute",opacity:.1,filter:"alpha(opacity=10)",background:"white",zIndex:50,top:0,left:0,width:s.getElementWidth(s.box),height:s.getElementHeight(s.box)});var l=this.proxy?t(this.proxy).show():t(this).clone().html("").appendTo(document.body);this.proxy=l.get(0),l.css({position:"absolute",opacity:.5,filter:"alpha(opacity=50)",zIndex:100,width:this.offsetWidth,height:this.offsetHeight,top:t(this).position().top,left:t(this).position().left,background:"black"});var u={mousemove:function(t){return s.disableSelection(),l.hasClass("bar-east")||l.hasClass("bar-west")?l.css({left:t.pageX}):l.css({top:t.pageY}),!1},mouseup:function(o){t([a.proxy,e.cover]).hide();var i=o.pageX,h=o.pageY,l=s.box.getBoundingClientRect();i-=l.left,h-=l.top;var c=s.userOptions.panelBar.size,g=s.userOptions.panelBar.each;return n.hasClass("bar-west")?r.css({width:i}):n.hasClass("bar-east")?r.css({width:s.getElementWidth(s.box)-i-(g.east.width||c)}):n.hasClass("bar-north")?r.css({height:h}):n.hasClass("bar-south")&&r.css({height:s.getElementHeight(s.box)-h-(g.south.height||c)}),r.get(0).offsetHeight&&r.get(0).offsetWidth||(r.hide(),n.get(0).style.cursor="auto"),t(document).off("mousemove",u.mousemove),t(document).off("mouseup",u.mouseup),t(window).trigger("resize"),!1}};t(document).on(u)}})},panelToggle:function(){var e=this;t(">.layout-middle-container>.resize-bar .imge, >.resize-bar .imge",this.box).click(function(s){var o=t(this).parent(),i=o.hasClass("bar-south")?o.next():o.prev(),a=e.userOptions.panel.each;if(o.hasClass("bar-north")&&a.north.toggle===!1||o.hasClass("bar-south")&&a.south.toggle===!1||o.hasClass("bar-west")&&a.west.toggle===!1||o.hasClass("bar-east")&&a.east.toggle===!1)return!1;var n=i.get(0).style;return"none"!==n.display?(o.get(0).style.cursor="auto",i.hide()):(o.get(0).style.cursor="","0px"===n.width&&(n.width=""),"0px"===n.height&&(n.height=""),i.show()),t(window).trigger("resize"),s.stopPropagation(),s.preventDefault(),!1})},resize:function(){var e=this.getElementHeight,s=this.panels,o=this.panelBars,i=/MSIE 6/,a=document.documentMode,n=this.getElementHeight(this.box)-e(s.north)-e(s.south)-e(o.north)-e(o.south);if(t(">.layout-middle-container",this.box).height(n),5===a||i.test(navigator.userAgent)){var r=this.getElementWidth,h=this.getElementWidth(this.box)-r(s.west)-r(s.east)-r(o.west)-r(o.east);t(">.layout-middle-container>.layout-center",this.box).css({width:h,height:n}),t(">.layout-middle-container>div",this.box).height(n)}}},o.prototype.init.prototype=o.prototype,this.each(function(){var s=t(this),i=o(this,t.extend(!0,{},e)),a=s.data("ui");a?a.iLayout=i:s.data("ui",{iLayout:i})})}}(jQuery);