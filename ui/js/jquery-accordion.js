$.fn.accordion=function(e){var t=$.type(e);if("string"===t)return this.each(function(){var t=$(this).data("ui");if(!t||!t.iAccordion)throw new Error("UI:accordion does not init...");t.iAccordion[e]()}),!0;e=$.extend(!0,{data:[]},e);var i=function(e,t){return new i.prototype.init(e,t)};return i.prototype={init:function(e,t){var i=this,n=$(e);n.addClass("accordion-container"),this.userOptions=t,this.render=e,e.children||(e.innerHTML="<ul></ul>"),this.titles=[];var o=e.children[0],s=0;if(o.children&&(s=o.children.length))for(var c=0;c<s;c++)if(this.titles.push(o.children[c].children[0]),c===t.selected){this.selectedPanel=o.children[c].children[1];var d=$(this.selectedPanel);document.documentMode<7&&d.css({display:"block"}),d.prev().addClass("selected"),t.fitContent?(this.selectedAnimateHeight=e.offsetHeight-s*o.children[0].offsetHeight,d.css("height",this.selectedAnimateHeight)):d.css("height","auto")}$("#test").delegate(".title",{click:function(){var e=this.parentNode.children[1],n=i.selectedPanel;n&&$(n.parentNode.children[0]).removeClass("selected"),e!=n?($(this).addClass("selected"),t.fitContent?$(e).animate({height:i.selectedAnimateHeight},{duration:210,start:function(){document.documentMode<7&&$(this).css({display:"block",overflow:"auto"})}}):$(e).css({display:"none",height:"auto"}).slideDown(210),i.selectedPanel=e):i.selectedPanel=null,n&&$(n).animate({height:0},{duration:210,complete:function(){document.documentMode<7&&$(this).css({display:"none",height:1,overflow:"hidden"})}})}})}},i.prototype.init.prototype=i.prototype,this.each(function(){var t=$(this),n=i(this,$.extend(!0,{},e)),o=t.data("ui");o?o.iAccordion=n:t.data("ui",{iAccordion:n})})};