$.fn.tabs=function(e){if("string"===$.type(e)){var t=Array.prototype.slice.call(arguments).slice(1);return this.each(function(){var i=$(this).data("ui");if(!i||!i.iTab)throw new Error("UI:tabs does not init...");i.iTab[e].apply(i.iTab,t)}),!0}e=$.extend(!0,{"height":80,"tabWidth":160,"contentFit":!1,"eventType":"click","border":!0,"icon":null,"selected":0,"position":"north"},e);var i=Array.prototype.slice,n=Object.prototype.toString,s=function(e){return n.call(e).slice(8,-1)},r=function(e){var t="",i=[],n=null,a=null,h=r,l=s(e);if("Array"===l)for(var c in e)t+=h(e[c]);else if("String"===l||"Number"==l)t=e;else if("Object"===l&&e.name){if(n=e.attr,a=e.children,i=[],n)for(var o in n)if("className"!=o){if("style"==o){var d=n[o],p=s(d);if(n[o]="","Object"==p)for(var f in d)n[o]+=f+":"+d[f]+";";else"String"==p&&(n[o]=d)}i.push(o+'="'+n[o]+'"')}else i.push('class="'+n[o]+'"');i.length&&i.unshift(""),a&&"Array"!==s(a)&&(a=[a]),t="<"+e.name+i.join(" ")+">"+(a?h(a):"")+"</"+e.name+">"}else t="";return t},a=function(e){var t=[];try{t=i.call(e)}catch(r){for(var n=0,s=e.length-1;n<=s;n++)t.push(e[n])}return t};Array.prototype.indexOf=Array.prototype.indexOf||function(e,t){return $.inArray(e,this,t)},e.renders=i.call(this);var h=function(e,t){return new h.prototype.init(e,t)};return h.prototype={"init":function(e,t){this.render=e,this.userOptions=t,this.headers=$(e.children[0].children).toArray(),this.panels=$(e.children[1].children).toArray(),$(this.panels).addClass("tab-content");var i=this;if($(e).addClass("tab-ctn"),this.headers.length&&($(this.headers[t.selected]).addClass("current"),$(this.panels).parent().show().end().hide().eq(t.selected).show()),t.contentFit){var n=e.children[1].offsetHeight-e.children[1].clientHeight,s=e.parentNode;$(window).on("resize.tab-content-fit",function(){$(e.children[1]).css({"height":s.clientHeight-n-e.children[0].offsetHeight+"px"})}).resize()}$(e.children[0]).on({"click":function(){i.select(i.headers.indexOf(this))}},"li").on({"click":function(){return i.close(i.headers.indexOf(this.parentNode.parentNode)),!1}},".closer")},"add":function(t,i){var n=this.render,s=this.headers.length,h="before";i===undefined&&(i=s),i<0&&(i=0),s?i>=s&&(i=s,h="after"):(i=0,$(n.children[1]).show());var l=r({"name":"li","children":{"name":"a","attr":{"href":"javascript:"},"children":function(){var e=['\x3c!--[if lt IE 8]><p class="iecp"></p><![endif]--\x3e','<span class="title">'+t.title+"</span>"];return t.icon&&e.unshift(r({"name":"span","attr":{"className":"icon icon-"+t.icon}})),t.closable&&e.push(r({"name":"span","attr":{"className":"closer"},"children":"&times;"})),e}()}}),c=$(r({"name":"div","attr":{"className":"tab-content","style":{"display":"none"}}}));if(this.headers.length){var o="after"===h?i-1:i;$(this.headers[o])[h](l),$(this.panels[o])[h](c.append(t.content))}else $(n.children[0]).html(l),$(n.children[1]).html(c.append(t.content));this.headers=a(n.children[0].children),this.panels=a(n.children[1].children),i<=this.userOptions.selected&&this.userOptions.selected++,t.select&&this.select(i);var d=this.render;return e.contentFit&&(d.children[1].style.height=d.parentNode.offsetHeight-d.children[0].offsetHeight-1+"px"),this},"remove":function(e){this.close(e)},"close":function(e){var t=this.headers.splice(e,1)[0],i=this.panels.splice(e,1)[0];t.parentNode.removeChild(t),i.parentNode.removeChild(i);var n=this.userOptions;return n.selected==e?this.headers.length?this.select(e-1>0?e-1:0):n.selected=null:n.selected>e&&n.selected--,this},"select":function(e){var t=this.userOptions.selected;return!(e<0||e>this.headers.length-1)&&($(this.headers[t]).removeClass("current"),$(this.headers[e]).addClass("current"),$(this.panels[t]).hide(),$(this.panels[e]).show(),this.userOptions.selected=e,this.userOptions.onSelect&&this.userOptions.onSelect(this.panels[e],e),this)}},h.prototype.init.prototype=h.prototype,this.each(function(){var t=$(this),i=h(this,$.extend(!0,{},e)),n=t.data("ui");n?n.iTab=i:t.data("ui",{"iTab":i})})};