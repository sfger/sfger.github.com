$.fn.slider=function(t){t=$.extend(!0,{interval:3e3,auto:!0,nextButton:null,prevButton:null,miniMap:!1},t);var i=function(t,e){return new i.prototype.init(t,e)};return i.prototype={store:{hover:!1,options:null,timer:null,$list:null,listLength:0,$miniMap:null},init:function(t,i){var e=this.store,n=e.$list=$(t).find(">ul>li");if(e.options=i,e.box=t,e.listLength=e.$list.length,!e.listLength)throw new Error("no slider items");var o=e.$list.filter(".active");if(o.length||(o=n.eq(0).addClass("active")),i.miniMap){if(i.miniMap===!0){for(var r=$('<div class="map-control"><ul></ul></div>'),s=n.filter(".active").index(),a=0,l=e.listLength;a<l;a++)$("ul",r).append('<li class="'+(s===a?"active":"")+'"></li>');e.$miniMap=r.find("li"),$(t).append(r)}else"string"==$.type(i.miniMap)&&$(i.miniMap).length&&(e.$miniMap=$(i.miniMap));e.$miniMap.eq(o.index()).addClass("active")}this.event(),i.auto&&this.autoSlider()},go:function(t,i){return i=i===!1,(!this.store.hover||!i)&&(0!=t&&void this.goTo(this.store.$list.filter(".active").index()+t))},goTo:function(t){for(var i=this.store.listLength;t>=i;)t-=i;for(;t<0;)t+=i;this.goToByElement(this.store.$list.get(t))},goToByElement:function(i){if("hidden"==document.visibilityState)return!1;if($(i).hasClass("active"))return!1;var e=$(i).index(),n=this.store.$list,o=this.store.$miniMap,r=n.filter(".active"),s=n.eq(e);n.removeClass("active").eq(e).addClass("active"),o&&o.removeClass("active").eq(e).addClass("active"),t.onSlider&&t.onSlider(r[0],s[0]),t.auto&&this.autoSlider()},event:function(){var t=this,i=this.store,e=i.options;$(e.prevButton).click(function(){t.go(-1)}),$(e.nextButton).click(function(){t.go(1)}),i.$miniMap&&i.$miniMap.click(function(){t.goToByElement(this)}),e.onCreate&&setTimeout(function(){e.onCreate(i.options.render)},0),e.auto&&$(i.options.render).hover(function(){i.hover=!0},function(){i.hover=!1,t.autoSlider()})},autoSlider:function(){var t=this,i=this.store;clearTimeout(i.timer),i.timer=setTimeout(function(){t.go(1,!1),t.autoSlider()},i.options.interval)}},i.prototype.init.prototype=i.prototype,this.each(function(){var e=$(this),n=i(this,$.extend(!0,{render:this},t)),o=e.data("ui");o?o.iSlider=n:e.data("ui",{iSlider:n})})};