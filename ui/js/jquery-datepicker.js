!function(e,t){"use strict";"function"===typeof define&&define.amd?define(["jquery","date-helper"],t):"object"===typeof exports?module.exports=t():t(jQuery)}(0,function(e,t){e.fn.datePicker=function(i){function n(e){for(var t=e.split(/[\ \-\:]/),i=0;i<t.length;i++)t[i]=Number(t[i]),1==i&&(t[i]=t[i]-1);return Date.UTC.apply(null,t)/1e3+60*(new Date).getTimezoneOffset()}function d(i,d){var a,o=e(l),u=t().set_date(i),p=new t(d.value?n(d.value):"");if("dateTime"!==s.type&&"dateHour"!==s.type||(e(".dtp-time",o).show(),e(".dtp-hour input",o).attr("value",p.php_date("H")),e(".dtp-minute input",o).attr("value",p.php_date("i")),e(".dtp-hour ul",o).append(function(){for(var e="",i=0;i<24;i++)e+="<li>"+t.pad(i,2)+"</li>";return e}),e(".dtp-minute ul",o).append(function(){for(var e="",i=0;i<60;i++)e+="<li>"+t.pad(i,2)+"</li>";return e})),s.monthNum>1){var r=o.find(".dtp-header"),c=o.find(".dtp-list");for(a=0;a<s.monthNum-1;a++)r.append(r.find("li").eq(0).clone()),c.append(c.find(".dtp-item").eq(0).clone())}for(a=0;a<s.monthNum;a++){var f;if(s.minDate)switch(typeof s.minDate){case"string":f=s.minDate;break;case"function":f=s.minDate()}for(var h=u.get_first_date_of_month(),m=h.php_date("w"),v=h.php_date("t"),_=1,y="",k=0;k<42;k++){var b="",T=h.php_date("Y-m-"+t.pad(_,2));f&&T<f?b=' class="disabled"':k<m||_>v?b=' class="disabled"':T==p.current_date&&(b=' class="selected"'),y+="<li"+b+">"+(k<m||_>v?t.date("j",h.current_timestamp+86400*(-m+k)):_++)+"</li>"}e(".dtp-header li",o).eq(a).html("<dfn>"+h.php_date("Y")+"</dfn><span>\u5e74</span><dfn>"+h.php_date("n")+"</dfn><span>\u6708</span>"),e(".dtp-wd",o).eq(a).append(y),e(".dtp-item",o).eq(0).css({"borderColor":"white"}),d&&d.ui&&d.ui.renderTo?d.ui.renderTo.innerHTML=o.html():o.appendTo("body"),u.get_offset_date(1,"m")}return o.get(0)}function a(i,n){var d=n?t(i.ui.skipdate).get_first_date_of_month().get_offset_date(e(n).closest(".dtp-item").index(),"m").get_offset_date(Number(n.innerHTML-1)).current_date:i.value.split(" ")[0];"dateTime"===s.type&&(d+=" "+e(i.ui.renderTo).find(".dtp-hour input").val()+":"+e(i.ui.renderTo).find(".dtp-minute input").val()),i.value=d}var s=e.extend(!0,{"type":"date","monthNum":1,"proxy":e("body"),"onComplete":function(){}},i),l='<div class="dtp-ctn"><a href="javascript:" class="dtp-switcher dtp-prev">&lt;</a><ul class="dtp-header"><li></li></ul><a href="javascript:" class="dtp-switcher dtp-next">&gt;</a><div class="dtp-list"><div class="dtp-item"><ul class="dtp-wh"><li class="item day weekend">\u65e5</li><li class="item day">\u4e00</li><li class="item day">\u4e8c</li><li class="item day">\u4e09</li><li class="item day">\u56db</li><li class="item day">\u4e94</li><li class="item day weekend">\u516d</li></ul><ul class="dtp-wd"></ul></div></div><div class="dtp-time"><span>\u65f6\u95f4: </span><label class="dtp-hour"><span>\u5c0f\u65f6:</span><input type="text" value="" /><ul></ul></label><span> : </span><label class="dtp-minute"><span>\u5206\u949f:</span><input type="text" value="" /><ul></ul></label></div></div>';return this.each(function(){var i=this,n=this.value;this.ui={"hovered":!1,"skipdate":n,"renderTo":d(n,i)},e(this.ui.renderTo).css({"position":"absolute","left":e(i).position().left,"top":e(i).position().top+i.offsetHeight}),e(this.ui.renderTo).on({"click":function(){i.ui.skipdate=t(i.ui.skipdate).get_offset_date(-Number(s.monthNum),"m").current_date,d(i.ui.skipdate,i)}},".dtp-prev").on({"click":function(){i.ui.skipdate=t(i.ui.skipdate).get_offset_date(Number(s.monthNum),"m").current_date,d(i.ui.skipdate,i)}},".dtp-next").on({"click":function(){a(i,this),e(i.ui.renderTo).hide(),s.onComplete&&s.onComplete.call(i,i.value)}},'.dtp-wd li:not(".disabled")').on({"mouseenter click":function(){i.ui.hovered=!0},"mouseleave":function(){i.ui.hovered=!1}}),e(this).on({"focus click":function(){s.proxy.trigger("click"),d(this.value,this),this.ui.hovered=!0,this.ui.skipdate=this.value,e(this.ui.renderTo).show()},"blur":function(){this.ui.hovered=!1}}),s.proxy.on({"click":function(){i.ui.hovered||e(i.ui.renderTo).hide()}}),e(this.ui.renderTo).on({"focus click":function(){var t=e(this).next();t.find("li").removeClass("selected").eq(this.value).addClass("selected"),t.show().closest("label").siblings().find("ul").hide()},"blur":function(){var t=e(this).next();this._not_to_hide||setTimeout(function(){t.hide()},230),delete this._not_to_hide}},".dtp-time input").on({"mousedown":function(){e(this).closest("ul").prev().get(0)._not_to_hide=!0},"click":function(){var t=e(this),n=t.closest("ul");n.prev().val(e.trim(t.text())),a(i),setTimeout(function(){n.hide()},1)}},".dtp-time li")})}});