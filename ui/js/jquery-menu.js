!function(e,t){"use strict";e.fn.menu=function(t,n){var i=e.type(t);if("string"===i)return this.each(function(){var i=e(this).data("ui");if(!i||!i.iMenu)throw new Error("UI:menu does not init...");i.iMenu[t](n)}),!0;var s=e.extend(!0,{animate:{time:0},autoHide:!0,data:[]},t),a=function(e,t){return new a.prototype.init(e,t)};return a.prototype={init:function(t,n){var i=this;this.userOptions=n;var s=window.document,a=e(t);a.addClass("menu-ctn cf").hide(),this.container=t,this.menuitems={};var o=function(e){var t=e.data,n=s.createElement("div");n.className="wraper",e.width&&(5===s.documentMode||/MSIE 6/.test(navigator.userAgent)?n.style.width=e.width+2+"px":n.style.width=e.width+"px"),n.style.position="relative",n.innerHTML='<div class="menu-vertical-line"></div>';var a=s.createElement("ul");a.className="cf";for(var u=0,r=t.length-1;r>=u;u++){var l,h=s.createElement("li");if("separate"==t[u]["class"])l=s.createElement("span"),h.className=t[u]["class"];else{l=s.createElement("a");var c=s.createElement("span"),d=s.createElement("span");if(t[u].sub&&t[u].sub.data&&t[u].sub.data.length){var m=s.createElement("span");m.className="sub-tag",l.appendChild(m)}c.className="icon"+(t[u].icon?" icon-"+t[u].icon:""),l.appendChild(c),d.innerHTML=t[u].text||"",d.className="text",l.appendChild(d),l.setAttribute("href","javascript:;"),t[u].disabled&&(l.className="disabled"),t[u]["class"]&&(h.className=t[u]["class"]),i.menuitems[t[u].name]=h}if(l.option=t[u],h.appendChild(l),t[u].sub&&t[u].sub.data&&t[u].sub.data.length){var p=s.createElement("div");p.style.display="none",5===s.documentMode||/MSIE 6/.test(navigator.userAgent)?(p.style.position="absolute",p.style.marginTop="-22px"):(p.style.position="relative",p.style.top="-22px"),p.style.left=e.width-2+"px",p.appendChild(o(t[u].sub)),p.className="menu-ctn cf",h.appendChild(p)}a.appendChild(h)}return n.appendChild(a),n};e(o(n)).appendTo(t),a.on({mouseenter:function(){this.showMenuTimer&&clearTimeout(this.showMenuTimer),this.showMenuTimer=null},mouseleave:function(){var e=this;this.showMenuTimer=setTimeout(function(){e.style.display="none",e.showMenuTimer=null,i.hide()},300)}}).on({click:function(){return this.option.disabled?!1:(t.style.display="none",void i.userOptions.onClick.bind(this)(this.option))},mouseenter:function(){if(this.option.disabled)return!0;var e=this.nextSibling;e&&(e.showMenuTimer&&clearTimeout(e.showMenuTimer),e.showMenu=!0,e.style.display="",e.showMenuTimer=null)},mouseleave:function(){var e=this.nextSibling;e&&e.showMenu===!0&&(e.showMenuTimer=setTimeout(function(){e.showMenu=!1,e.style.display="none",e.showMenuTimer=null},300))}},"a").on({mouseover:function(){this.showMenuTimer&&clearTimeout(this.showMenuTimer),this.showMenu=!0,this.showMenuTimer=null},mouseout:function(){var e=this;this.showMenuTimer=setTimeout(function(){e.showMenu=!1,e.style.display="none",e.showMenuTimer=null},300)}},".menu-ctn"),n.onCreate.bind(this)()},open:function(e){this.show(e)},show:function(t){return e(this.container).css({left:t.pageX,top:t.pageY}).show(),(5===document.documentMode||/MSIE 6/.test(navigator.userAgent))&&e(this.container).find(".menu-vertical-line").each(function(){this.style.height=this.parentNode.offsetHeight+"px"}),this.userOptions.onShow.bind(this)(),this},hide:function(){return e(this.container).hide(),this.userOptions.onHide.bind(this)(),this},hideMenuItem:function(e){return this.menuitems[e].style.display="none",this},showMenuItem:function(e){return this.menuitems[e].style.display="",this},addMenuItem:function(t,n,i){var s,a=document.createElement("li");if("separate"==t["class"])s=document.createElement("span"),a.className=t["class"];else{s=document.createElement("a");var o=document.createElement("span"),u=document.createElement("span");o.className="icon"+(t.icon?" icon-"+t.icon:""),s.appendChild(o),u.innerHTML=t.text||"",u.className="text",s.appendChild(u),s.setAttribute("href","javascript:;"),s.option=t,t.disabled&&(s.className="disabled"),t["class"]&&(a.className=t["class"]),this.menuitems[t.name]=a}a.appendChild(s);var r,l;return i?(r=e(this.menuitems[i]),n||(n="after"),l=n):(r=e("ul",this.container).eq(0),l=n&&"after"!=n?"prepend":"append"),r[l](a),this},updateMenuItem:function(t,n){if(!this.menuitems[t])return this;var i=e(this.menuitems[t]);return i.find("a")[n.disabled?"addClass":"removeClass"]("disabled").get(0).option=n,i.find(".icon").removeClass().addClass("icon"+(n.icon?" icon-"+n.icon:"")),i.find(".text").html(n.text),this},deleteMenuItem:function(t){return this.menuitems[t]?(this.menuitems[t].option=null,e(this.menuitems[t]).remove(),this):this}},a.prototype.init.prototype=a.prototype,this.each(function(){var t=e(this),n=a(this,e.extend(!0,{},s)),i=t.data("ui");i?i.iMenu=n:t.data("ui",{iMenu:n})})}}(jQuery);