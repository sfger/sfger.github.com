!function(t,e){"use strict";t.fn.window=function(e){var i=t.type(e);if("string"===i)return this.each(function(){var i=t(this).data("ui");if(!i||!i.iWindow)throw new Error("UI:window does not init...");i.iWindow[e]()}),!0;e=t.extend(!0,{title:"",show:!1,footer:{}},e);var o=function(t,e){return new o.prototype.init(t,e)};return o.prototype={init:function(e,i){var o=this,n=t(e),s=i.footer.formatter?'<div class="window-bar window-footer">'+i.footer.formatter()+"</div>":"",r='<div class="window-ctn"><div class="window-wrapper"><div class="window-bar window-header"><div class="window-title">'+(i.title||"")+'</div><a href="javascript:;" class="window-closer">&times;</a><!--[if lt IE 8]><p class="iecp"></p><![endif]--></div><div class="window-contents"></div>'+s+'</div><!--[if lt IE 8]><p class="iecp"></p><![endif]--></div>',c=t(r.replace(/(\/?>)\s+|\s+(?=<)/g,"$1")).appendTo(document.body);i["class"]&&c.addClass(i["class"]),i.id&&c.attr("id",i.id),this.userOptions=i,this.container=c.get(0),this.render=e,this.wraper=t(".window-wrapper",c).get(0),this.closer=t(".window-closer",c).get(0),this.contents=t(".window-contents",c).get(0),this.title=t(".window-title",c).html(i.title).get(0),n.addClass("window-view").appendTo(this.contents).show(),t(["Height","Width"]).each(function(t,e){o["getView"+e]=function(){var t="BackCompat"===document.compatMode?document.body:document.documentElement;return function(){return t["client"+e]}}(),o["getElement"+e]=function(t){return t&&"none"!==t.style.display?t["offset"+e]:0}}),t(this.closer).on("click",function(){return o.close(),!1}),i.show&&this.show(),i.onCreate&&"function"==typeof i.onCreate&&i.onCreate()},resize:function(){var e=t(this.container);e.is(":visible")&&e.css({width:this.getViewWidth(),height:this.getViewHeight()})},open:function(){this.show()},show:function(){var e=t(this.container);if(e.is(":visible"))return!1;var i=this.userOptions;if(i.onBeforeOpen&&!i.onBeforeOpen())return!1;e.fadeIn(150);var o="CSS1Compat"===document.compatMode,n=/MSIE 6.0/.exec(navigator.userAgent);return!n&&o||(e.css({height:this.getViewHeight(),position:"absolute"}),t(window).on("scroll.windowIE6",{el:this.container},this.scrollIE6),t(window).trigger("scroll.windowIE6")),i.onOpen&&i.onOpen(),this},scrollIE6:function(e){var i=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;t(e.data.el).css({top:i})},close:function(){var e=this.userOptions;return e.onBeforeClose&&"function"==typeof e.onClose&&!e.onBeforeClose()?!1:(t(this.container).fadeOut(150),t(window).off("scroll.windowIE6",this.scrollIE6),e.onClose&&"function"==typeof e.onClose&&e.onClose(),this)}},o.prototype.init.prototype=o.prototype,this.each(function(){var i=t(this),n=o(this,t.extend(!0,{},e)),s=i.data("ui");s?s.iWindow=n:i.data("ui",{iWindow:n})})}}(jQuery);