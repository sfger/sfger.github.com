window.__version__=document.getElementById("requirejs").getAttribute("data-version"),require.config({baseUrl:"./",urlArgs:__version__,map:{"*":{css:"public/require-css.js"}},paths:{jquery:"public/js/jquery"},shim:{jquery:["public/js/es5-shim","public/js/es6-shim"]}}),require(["jquery","public/js/router","public/js/ejs"],function(e,r){var t=r.Router,i={root:document.getElementById("page"),boot:function(){this.init_router(),this.define_router_param(),this.config_router(),this.global_router(),this.router.init("index")},fullScreen:function(r){e("html").addClass("full-screen"),r&&r()},exitFullScreen:function(r){e("html").removeClass("full-screen"),r&&r()},init_router:function(){i.router=t({"/404":{before:i.fullScreen,after:i.exitFullScreen,on:function(e){document.title="404 Not Found",new EJS({text:'<div class="imgc" style="height:100%;"><div class="imge">您访问的网页不存在，<a href="#/index">返回首页</a></div></div>'}).update(i.root,{data:{}}),e()}}}).configure({async:!0,recurse:"forward",notfound:function(){i.router.dispatch("on","/404")}})},define_router_param:function(){router=this.router,router.param("id",/([\d]+)/),router.param("index",/([\w]+)/)},global_router:function(){router=this.router,router.on("on","/?(.*)",function(r,t){var o=function(){i.page&&i.page.destroy(),e(i.root).empty()};new Promise(function(e,t){var i="share/js/"+(r||"index");require([i],e,function(e){return t(404)})}).then(function(e){return o(),e?(e.option={router:router,path:r,next:t,app:i},e.create(),void(i.page=e)):Promise.reject(404)})["catch"](function(e){o(),router.dispatch("on","/404")})})},config_router:function(){router.on("on","/article/:index",function(e,r){require.config({shim:{"public/js/highlight":{exports:"hljs"}}}),require(["jquery","public/js/markdown-it","public/js/highlight","share/tpl/article/"+e+".markdown"],function(t,o,n,a){if(!a)return router.dispatch("on","/404");var u=(new o).set({html:!0,breaks:!0});a=u.render(a[e+".markdown"]),new EJS({text:'<div class="article-page"><div class="article-bar article-header"><div class="wrap"><a href="#/index">首页</a> <a href="#/article/markdown">本文链接</a></div></div><div class="markdown-body md-ctn wrap"><%=data%></div><div class="article-bar article-footer"><div class="wrap"><a href="#/index">首页</a> <a href="/#/article/markdown">本文链接</a></div></div></div>'}).update(i.root,{data:a,home:"#/index"}),t("pre code").each(function(e,r){n.highlightBlock(r)}),r()},function(){router.dispatch("on","/404")})})}};i.boot()});