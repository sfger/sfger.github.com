window.__version__=document.getElementById("requirejs").getAttribute("data-version"),require.config({baseUrl:"./",urlArgs:__version__,map:{"*":{css:"public/require-css.js"}},paths:{jquery:"public/js/jquery"},shim:{jquery:["public/js/es5-shim","public/js/es6-shim"]}}),define("app/404",function(){return'<div class="imgc" style="height:100%;"><div class="imge">您访问的网页不存在，<a href="#/index">返回首页</a></div></div>'}),define("app/router",["public/js/router","app/404"],function(e,r){return function(t){return e.Router({"/404":{before:t.fullScreen,after:t.exitFullScreen,on:function(e){document.title="404 Not Found",new EJS({text:r}).update(t.root,{data:{}}),e()}}}).configure({async:!0,recurse:"forward",notfound:function(){t.router.dispatch("on","/404")}})}}),require(["jquery","app/router","public/js/ejs"],function(e,r){var t={root:document.getElementById("page"),boot:function(){this.router=r(this),this.define_router_param(),this.config_router(),this.global_router(),this.router.init("index")},fullScreen:function(r){e("html").addClass("full-screen"),r&&r()},exitFullScreen:function(r){e("html").removeClass("full-screen"),r&&r()},define_router_param:function(){var e=this.router;e.param("id",/([\d]+)/),e.param("index",/([\w]+)/)},global_router:function(){var r=this.router;r.on("on","/?(.*)",function(i,n){var o=function(){t.page&&t.page.destroy(),e(t.root).empty()};new Promise(function(e,r){var t="share/js/"+(i||"index");require([t],e,function(){return r(404)})}).then(function(e){return o(),e?(e.option={router:r,path:i,next:n,app:t},e.create(),void(t.page=e)):Promise.reject(404)})["catch"](function(){o(),r.dispatch("on","/404")})})},config_router:function(){var e=this.router;e.on("on","/article/:index",function(r,i){require.config({shim:{"public/js/highlight":{exports:"hljs"}}}),require(["jquery","public/js/markdown-it","public/js/highlight","share/tpl/article/"+r+".markdown"],function(n,o,a,u){if(!u)return e.dispatch("on","/404");t.exitFullScreen();var c=(new o).set({html:!0,breaks:!0});u=c.render(u[r+".markdown"]),new EJS({text:'<div class="article-page"><div class="article-bar article-header"><div class="wrap"><a href="#/index">首页</a> <a href="#/article/markdown">本文链接</a></div></div><div class="markdown-body md-ctn wrap"><%=data%></div><div class="article-bar article-footer"><div class="wrap"><a href="#/index">首页</a> <a href="/#/article/markdown">本文链接</a></div></div></div>'}).update(t.root,{data:u,home:"#/index"}),document.title=document.querySelector("h1").innerHTML,n("pre code").each(function(e,r){a.highlightBlock(r)}),i()},function(){e.dispatch("on","/404")})})}};t.boot()});