!function(e,n){if("function"===typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!==typeof exports&&"undefined"!==typeof module)n(exports,module);else{var t={"exports":{}};n(t.exports,t),e.fetchJsonp=t.exports}}(this,function(e,n){"use strict";function t(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(e){try{delete window[e]}catch(n){window[e]=undefined}}function i(e){var n=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(n)}var u={"timeout":5e3,"jsonpCallback":"callback","jsonpCallbackFunction":null},a=function(e){var n=arguments[1]===undefined?{}:arguments[1],a=null!=n.timeout?n.timeout:u.timeout,d=null!=n.jsonpCallback?n.jsonpCallback:u.jsonpCallback,l=undefined;return new Promise(function(u,r){var c=n.jsonpCallbackFunction||t();window[c]=function(e){u({"ok":!0,"json":function(){return Promise.resolve(e)}}),l&&clearTimeout(l),i(d+"_"+c),o(c)},e+=-1===e.indexOf("?")?"?":"&";var s=document.createElement("script");s.setAttribute("src",e+d+"="+c),s.id=d+"_"+c,document.getElementsByTagName("head")[0].appendChild(s),l=setTimeout(function(){r(new Error("JSONP request to "+e+" timed out")),o(c),i(d+"_"+c)},a)})};n.exports=a});