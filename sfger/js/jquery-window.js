!function(t,e){"use strict";t.fn.window=function(e){var o=t.type(e);if("string"===o)return this.each(function(){var o=t(this).data("ui");if(!o||!o.iWindow)throw new Error("UI:window does not init...");o.iWindow[e]()}),!0;e=t.extend(!0,{title:"",show:!1,footer:{}},e);var i=function(t,e){return new i.prototype.init(t,e)};return i.prototype={init:function(e,o){var i=this,n=t(e),s=o.footer.formatter?'<div class="window-bar window-footer">'+o.footer.formatter()+"</div>":"",r='<div class="window-ctn"><div class="window-wrapper"><div class="window-bar window-header"><div class="window-title">'+(o.title||"")+'</div><a href="javascript:;" class="window-closer">&times;</a><!--[if lt IE 8]><p class="iecp"></p><![endif]--></div><div class="window-contents"></div>'+s+'</div><!--[if lt IE 8]><p class="iecp"></p><![endif]--></div>',c=t(r.replace(/(\/?>)\s+|\s+(?=<)/g,"$1")).appendTo(document.body);o["class"]&&c.addClass(o["class"]),o.id&&c.attr("id",o.id),this.userOptions=o,this.container=c.get(0),this.render=e,this.wraper=t(".window-wrapper",c).get(0),this.closer=t(".window-closer",c).get(0),this.contents=t(".window-contents",c).get(0),this.title=t(".window-title",c).html(o.title).get(0),n.addClass("window-view").appendTo(this.contents).show(),t(["Height","Width"]).each(function(t,e){i["getView"+e]=function(){var t="BackCompat"===document.compatMode?document.body:document.documentElement;return function(){return t["client"+e]}}(),i["getElement"+e]=function(t){return t&&"none"!==t.style.display?t["offset"+e]:0}}),t(this.closer).on("click",function(t){return i.close(),!1}),o.show&&this.show();/MSIE 6.0/.exec(navigator.userAgent),"CSS1Compat"===document.compatMode;o.onCreate&&"function"==typeof o.onCreate&&o.onCreate()},resize:function(){var e=t(this.container);e.is(":visible")&&e.css({width:this.getViewWidth(),height:this.getViewHeight()})},open:function(){this.show()},show:function(){var e=(document.documentElement,document.body,t(this.container));t(this.contents),this.wraper;if(e.is(":visible"))return!1;var o=this.userOptions;if(o.onBeforeOpen&&!o.onBeforeOpen())return!1;e.fadeIn(150);var i="CSS1Compat"===document.compatMode,n=/MSIE 6.0/.exec(navigator.userAgent);return(n||!i)&&(e.css({height:this.getViewHeight(),position:"absolute"}),t(window).on("scroll.windowIE6",{el:this.container},this.scrollIE6),t(window).trigger("scroll.windowIE6")),o.onOpen&&o.onOpen(),this},scrollIE6:function(e){var o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;t(e.data.el).css({top:o})},close:function(){var e=this.userOptions;return e.onBeforeClose&&"function"==typeof e.onClose&&!e.onBeforeClose()?!1:(t(this.container).fadeOut(150),t(window).off("scroll.windowIE6",this.scrollIE6),e.onClose&&"function"==typeof e.onClose&&e.onClose(),this)}},i.prototype.init.prototype=i.prototype,this.each(function(){var o=t(this),n=i(this,t.extend(!0,{},e)),s=o.data("ui");s?s.iWindow=n:o.data("ui",{iWindow:n})})}}(jQuery);